<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Jira REST API调用方式 | Lemon</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Jira REST API调用方式" /><meta name="author" content="Lemon" /><meta property="og:locale" content="en_US" /><meta name="description" content="调用Jira REST API时的权限验证采用basic authentication这种验证方式，主要考虑到简单易行、操作方便。具体的操作方法为在请求的http header中添加Authorization参数，取值为Basic base64(username:password)，这里的username和password是企业自己部署的JIRA平台的登陆账号和密码。 Jira REST API：https://docs.atlassian.com/software/jira/docs/api/REST/5.1.3/#id120417 ```java package com.jira.test.util;" /><meta property="og:description" content="调用Jira REST API时的权限验证采用basic authentication这种验证方式，主要考虑到简单易行、操作方便。具体的操作方法为在请求的http header中添加Authorization参数，取值为Basic base64(username:password)，这里的username和password是企业自己部署的JIRA平台的登陆账号和密码。 Jira REST API：https://docs.atlassian.com/software/jira/docs/api/REST/5.1.3/#id120417 ```java package com.jira.test.util;" /><link rel="canonical" href="http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" /><meta property="og:url" content="http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" /><meta property="og:site_name" content="Lemon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-12-02T05:47:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Jira REST API调用方式" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Lemon" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/"},"url":"http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/","author":{"@type":"Person","name":"Lemon"},"headline":"Jira REST API调用方式","dateModified":"2020-12-02T05:47:00+00:00","datePublished":"2020-12-02T05:47:00+00:00","description":"调用Jira REST API时的权限验证采用basic authentication这种验证方式，主要考虑到简单易行、操作方便。具体的操作方法为在请求的http header中添加Authorization参数，取值为Basic base64(username:password)，这里的username和password是企业自己部署的JIRA平台的登陆账号和密码。 Jira REST API：https://docs.atlassian.com/software/jira/docs/api/REST/5.1.3/#id120417 ```java package com.jira.test.util;","@context":"https://schema.org"}</script><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <script src="/assets/js/post.min.js" async></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Lemon</a></div><div class="site-subtitle font-italic"></div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/soupk" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kaiqiang.zhong','foxmail.com'].join('@')" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Jira REST API调用方式</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Jira REST API调用方式</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 2, 2020, 5:47 AM +0000" > Dec 2, 2020 <i class="unloaded">2020-12-02T05:47:00+00:00</i> </span> by <span class="author"> Lemon </span></div><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 3, 2020, 3:33 PM +0800" > Dec 3, 2020 <i class="unloaded">2020-12-03T07:33:42+00:00</i> </span></div><div> <i class="far fa-eye fa-fw"></i> <span id="busuanzi_container_page_pv"> <span id="busuanzi_value_page_pv"></span> </span> views</div></div><div class="post-content"><p>调用Jira REST API时的权限验证采用basic authentication这种验证方式，主要考虑到简单易行、操作方便。具体的操作方法为在请求的http header中添加Authorization参数，取值为Basic base64(username:password)，这里的username和password是企业自己部署的JIRA平台的登陆账号和密码。<br /> Jira REST API：<a href="https://docs.atlassian.com/software/jira/docs/api/REST/5.1.3/#id120417">https://docs.atlassian.com/software/jira/docs/api/REST/5.1.3/#id120417</a></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.jira.test.util</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.mail.MessagingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.HttpStatus</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.config.CookieSpecs</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.config.RequestConfig</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpGet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.CloseableHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.HttpClients</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.util.EntityUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.util.Base64Utils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.jira.test.model.vo.JiraAttachment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.jira.test.model.vo.JiraAttachmentVo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JiraAttachmentUtil</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">BASE_URL</span> <span class="o">=</span> <span class="s">"http://localhost:8080/rest/api/2/issue/"</span><span class="o">;</span> 
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ADMIN_ACCOUNT</span> <span class="o">=</span> <span class="s">"admin"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ADMIN_PASSWORD</span> <span class="o">=</span> <span class="s">"admin"</span><span class="o">;</span>

    <span class="cm">/**
     * @Title: getAttachmentUrlList
     * @Description: 获取当前issue关联所有附件的下载链接
     * @param issueId issue的id
     * @return
     * @throws IOException
     * @throws MessagingException List&lt;String&gt;
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="nf">getAttachmentList</span><span class="o">(</span><span class="nc">String</span> <span class="n">issueId</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">MessagingException</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
        <span class="nc">JiraAttachmentVo</span> <span class="n">jiraAttachmentVo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JiraAttachmentVo</span><span class="o">();</span> <span class="c1">// 根据Jira返回的json数据格式建立的vo类</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="n">attachmentList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;();</span> <span class="c1">// 作为返回的数据集，也可以是json或其他类型</span>
        
        <span class="c1">// 权限验证</span>
        <span class="nc">String</span> <span class="n">basic_auth</span> <span class="o">=</span> <span class="s">"Basic "</span><span class="o">;</span> <span class="c1">// 后面一定要跟一个空格</span>
        <span class="n">basic_auth</span> <span class="o">+=</span> <span class="nc">Base64Utils</span><span class="o">.</span><span class="na">encodeToString</span><span class="o">((</span><span class="no">ADMIN_ACCOUNT</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="no">ADMIN_PASSWORD</span><span class="o">).</span><span class="na">getBytes</span><span class="o">());</span>
        
        <span class="c1">// 请求API接口的相关实体类</span>
        <span class="nc">CloseableHttpClient</span> <span class="n">closeableHttpClient</span> <span class="o">=</span> <span class="nc">HttpClients</span><span class="o">.</span><span class="na">createDefault</span><span class="o">();</span>
        <span class="nc">RequestConfig</span> <span class="n">defaultConfig</span> <span class="o">=</span> <span class="nc">RequestConfig</span><span class="o">.</span><span class="na">custom</span><span class="o">().</span><span class="na">setCookieSpec</span><span class="o">(</span><span class="nc">CookieSpecs</span><span class="o">.</span><span class="na">STANDARD</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
        <span class="nc">HttpResponse</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        
        <span class="c1">// 权限验证参数设置</span>
        <span class="nc">HttpGet</span> <span class="n">httpGet</span><span class="o">;</span>
        <span class="n">httpGet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpGet</span><span class="o">(</span><span class="no">BASE_URL</span> <span class="o">+</span> <span class="n">issueId</span><span class="o">);</span>
        <span class="n">httpGet</span><span class="o">.</span><span class="na">setConfig</span><span class="o">(</span><span class="n">defaultConfig</span><span class="o">);</span>
        <span class="n">httpGet</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
        <span class="n">httpGet</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
        <span class="n">httpGet</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="n">basic_auth</span><span class="o">);</span>
        
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 开始请求</span>
            <span class="n">httpResponse</span> <span class="o">=</span> <span class="n">closeableHttpClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpGet</span><span class="o">);</span>
            <span class="c1">// 返回数据</span>
            <span class="k">if</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">SC_OK</span> <span class="o">==</span> <span class="n">httpResponse</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getStatusCode</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">HttpEntity</span> <span class="n">httpEntity</span> <span class="o">=</span> <span class="n">httpResponse</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">httpEntity</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">body</span> <span class="o">=</span> <span class="nc">EntityUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">httpEntity</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"jira返回数据："</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>
                    <span class="n">jiraAttachmentVo</span> <span class="o">=</span> <span class="nc">JsonUtil</span><span class="o">.</span><span class="na">toBean</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="nc">JiraAttachmentVo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="n">jiraAttachmentVo</span> <span class="o">&amp;&amp;</span> <span class="kc">null</span> <span class="o">!=</span> <span class="n">jiraAttachmentVo</span><span class="o">.</span><span class="na">getFields</span><span class="o">()</span>
                            <span class="o">&amp;&amp;</span> <span class="n">jiraAttachmentVo</span><span class="o">.</span><span class="na">getFields</span><span class="o">().</span><span class="na">getAttachment</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">for</span> <span class="o">(</span><span class="nc">JiraAttachment</span> <span class="n">jiraAttachment</span> <span class="o">:</span> <span class="n">jiraAttachmentVo</span><span class="o">.</span><span class="na">getFields</span><span class="o">().</span><span class="na">getAttachment</span><span class="o">())</span> <span class="o">{</span>
                            <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">attachmentMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
                            <span class="n">attachmentMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"content"</span><span class="o">,</span> <span class="n">jiraAttachment</span><span class="o">.</span><span class="na">getContent</span><span class="o">());</span>
                            <span class="n">attachmentMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"created"</span><span class="o">,</span> <span class="n">jiraAttachment</span><span class="o">.</span><span class="na">getCreated</span><span class="o">());</span>
                            <span class="n">attachmentMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"filename"</span><span class="o">,</span> <span class="n">jiraAttachment</span><span class="o">.</span><span class="na">getFilename</span><span class="o">());</span>
                            <span class="n">attachmentMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">jiraAttachment</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
                            <span class="n">attachmentList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">attachmentMap</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">closeableHttpClient</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">attachmentList</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/** 
     * @Title: createIssue 
     * @Description: 创建issue
     * @param jiraIssueVo
     * @return
     * @throws IOException JiraIssueResponseVo
     */</span> 
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">JiraIssueResponseVo</span> <span class="nf">createIssue</span><span class="o">(</span><span class="nc">JiraIssueVo</span> <span class="n">jiraIssueVo</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
        <span class="nc">JiraIssueResponseVo</span> <span class="n">jiraIssueResponseVo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JiraIssueResponseVo</span><span class="o">();</span>

        <span class="c1">// 权限验证</span>
        <span class="nc">String</span> <span class="n">basic_auth</span> <span class="o">=</span> <span class="s">"Basic "</span><span class="o">;</span>
        <span class="n">basic_auth</span> <span class="o">+=</span> <span class="nc">Base64Utils</span><span class="o">.</span><span class="na">encodeToString</span><span class="o">((</span><span class="no">ADMIN_ACCOUNT</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="no">ADMIN_PASSWORD</span><span class="o">).</span><span class="na">getBytes</span><span class="o">());</span>

        <span class="c1">// 请求API接口的相关实体类</span>
        <span class="nc">CloseableHttpClient</span> <span class="n">closeableHttpClient</span> <span class="o">=</span> <span class="nc">HttpClients</span><span class="o">.</span><span class="na">createDefault</span><span class="o">();</span>
        <span class="nc">HttpResponse</span> <span class="n">httpResponse</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="c1">// 参数设置</span>
        <span class="nc">String</span> <span class="n">param</span> <span class="o">=</span> <span class="no">JSON</span><span class="o">.</span><span class="na">toJSONString</span><span class="o">(</span><span class="n">jiraIssueVo</span><span class="o">);</span>
        <span class="nc">StringEntity</span> <span class="n">stringEntity</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringEntity</span><span class="o">(</span><span class="n">param</span><span class="o">,</span> <span class="nc">Charset</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>
        <span class="n">stringEntity</span><span class="o">.</span><span class="na">setContentEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
        <span class="n">stringEntity</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">);</span>

        <span class="c1">// 权限验证参数设置</span>
        <span class="nc">HttpPost</span> <span class="n">httpPost</span><span class="o">;</span>
        <span class="n">httpPost</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpPost</span><span class="o">(</span><span class="no">BASE_URL</span><span class="o">);</span>
        <span class="n">httpPost</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json; charset=UTF-8"</span><span class="o">);</span>
        <span class="n">httpPost</span><span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="n">basic_auth</span><span class="o">);</span>
        <span class="n">httpPost</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="n">stringEntity</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 请求开始</span>
            <span class="n">httpResponse</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpResponse</span><span class="o">)</span> <span class="n">closeableHttpClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpPost</span><span class="o">);</span>
            <span class="c1">// 返回数据</span>
            <span class="k">if</span> <span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">SC_OK</span> <span class="o">==</span> <span class="n">httpResponse</span><span class="o">.</span><span class="na">getStatusLine</span><span class="o">().</span><span class="na">getStatusCode</span><span class="o">())</span> <span class="o">{</span>
                <span class="nc">HttpEntity</span> <span class="n">httpEntity</span> <span class="o">=</span> <span class="n">httpResponse</span><span class="o">.</span><span class="na">getEntity</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">httpEntity</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">body</span> <span class="o">=</span> <span class="nc">EntityUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">httpResponse</span><span class="o">.</span><span class="na">getEntity</span><span class="o">(),</span> <span class="s">"UTF-8"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"jira返回数据："</span> <span class="o">+</span> <span class="n">body</span><span class="o">);</span>
                    <span class="n">jiraIssueResponseVo</span> <span class="o">=</span> <span class="nc">JsonUtil</span><span class="o">.</span><span class="na">toBean</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="nc">JiraIssueResponseVo</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">closeableHttpClient</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">jiraIssueResponseVo</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/Knowledge/'>Knowledge</a>, <a href='/categories/Jira/'>Jira</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/Jira/" class="post-tag no-text-decoration" >Jira</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Jira REST API调用方式 - Lemon&url=http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Jira REST API调用方式 - Lemon&u=http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Jira REST API调用方式 - Lemon&url=http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=Jira REST API调用方式 - Lemon&url=http://localhost:4000/posts/jira-rest-api-diaoyong-fangfa/" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank"> <i class="fa-fw fab fa-weibo"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/dui-zifuchuan-leixing-ziduan-jinxing-shuzizhi-paixu/">MySQL中对字符串类型字段进行数字值排序</a><li><a href="/posts/unable-to-load-annotation-processor-factory/">Unable to load annotation processor factory 'C:\Program Files\Java\jdk1.8.1_11\lib\jconsole.jar</a><li><a href="/posts/next-he-nextline-de-qubie/">next()和nextLine()的区别</a><li><a href="/posts/java-ruhe-panduan-bigdecimal-shifou-wei0/">如何判断Bigdecimal类型变量是否等于0</a><li><a href="/posts/java-shanchu-shuzu-zhong-yuansu/">Java删除数组中元素的方法</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/Linux/">Linux</a> <a class="post-tag" href="/tags/Oracle/">Oracle</a> <a class="post-tag" href="/tags/Jekyll/">Jekyll</a> <a class="post-tag" href="/tags/GitBook/">GitBook</a> <a class="post-tag" href="/tags/SYSTEM/">SYSTEM</a> <a class="post-tag" href="/tags/Maven/">Maven</a> <a class="post-tag" href="/tags/PLSQL/">PLSQL</a> <a class="post-tag" href="/tags/MyBatis/">MyBatis</a> <a class="post-tag" href="/tags/Git/">Git</a> <a class="post-tag" href="/tags/CSS/">CSS</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/jira-de-anzhuang-he-peizhi/"><div class="card-body"> <span class="timeago small" > Jan 17 <i class="unloaded">2021-01-17T05:47:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Jira 7.8的安装和配置</h3><div class="text-muted small"><p> 一、安装前准备 Jira的运行是依赖Java环境的，也就是说需要安装JDK并且要是1.8以上版本，除此之外，我们还需要安装MySQL，为Jira创建对应的数据库，注意建库字符集为UTF-8，以上环境准备完毕后，我们现在开始下载并安装Jira。 二、下载Jira 到Jira官方下载网站下载和系统匹配的版本，或者使用Linux命令下载：wget https://downloads.atlas...</p></div></div></a></div><div class="card"> <a href="/posts/jira-de-yixie-chaxun/"><div class="card-body"> <span class="timeago small" > Jan 17 <i class="unloaded">2021-01-17T05:47:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Jira 的一些查询</h3><div class="text-muted small"><p> 1. 查询Jira问题的固定或级联字段 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 SELECT jiraissue.* FROM jiraissue, OS_HISTORYSTEP, customfieldvalue, customfieldoption WHERE OS_HISTORYSTEP.ENTRY...</p></div></div></a></div><div class="card"> <a href="/posts/jquery-huoqu-xianglin-yuansu/"><div class="card-body"> <span class="timeago small" > Dec 7, 2020 <i class="unloaded">2020-12-07T05:47:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JQuery获取相邻元素</h3><div class="text-muted small"><p> JQuery里我们要获取某个元素的相邻元素时，可以用到的命令有三个： next()：用来获取下一个同辈元素。 prev()：用来获取上一个同辈元素。 siblings()：用来获取所有的同辈元素。 下面来看看简单的实例： 1 2 3 4 5 6 7 8 9 10 11 &lt;div&gt; &lt;p id="1"&gt;1&lt;/p&gt; &lt;p...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/sanzhong-shujuk-jdbc-lianjiefangshi/" class="btn btn-outline-primary"><p>三种数据库的JDBC连接方式</p></a> <a href="/posts/log4j-rizhi-wenjian-luanma/" class="btn btn-outline-primary"><p>Log4j日志文件乱码</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> <script type="text/javascript" src="\assets\plugins\fancybox-2.1.7\lib/jquery.mousewheel.pack.js?v=3.1.3"></script> <script type="text/javascript" src="\assets\plugins\fancybox-2.1.7\source/jquery.fancybox.pack.js?v=2.1.5"></script><link rel="stylesheet" type="text/css" href="\assets\plugins\fancybox-2.1.7\source/jquery.fancybox.css?v=2.1.5" media="screen" /><link rel="stylesheet" type="text/css" href="\assets\plugins\fancybox-2.1.7\source/helpers/jquery.fancybox-buttons.css?v=1.0.5" /> <script type="text/javascript" src="\assets\plugins\fancybox-2.1.7\source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script><link rel="stylesheet" type="text/css" href="\assets\plugins\fancybox-2.1.7\source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" /> <script type="text/javascript" src="\assets\plugins\fancybox-2.1.7\source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script> <script type="text/javascript" src="\assets\plugins\fancybox-2.1.7\source/helpers/jquery.fancybox-media.js?v=1.0.6"></script> <script> $(document).ready(function() { $("p img").not('.emoji').each(function() { var strA = "<a class='fancybox' data-fancybox-group='gallery' href='" + $(this).attr("data-src") + "'></a>"; $(this).wrapAll(strA); }); $('.fancybox').fancybox(); }); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">Lemon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/Linux/">Linux</a> <a class="post-tag" href="/tags/Oracle/">Oracle</a> <a class="post-tag" href="/tags/Jekyll/">Jekyll</a> <a class="post-tag" href="/tags/GitBook/">GitBook</a> <a class="post-tag" href="/tags/SYSTEM/">SYSTEM</a> <a class="post-tag" href="/tags/Maven/">Maven</a> <a class="post-tag" href="/tags/PLSQL/">PLSQL</a> <a class="post-tag" href="/tags/MyBatis/">MyBatis</a> <a class="post-tag" href="/tags/Git/">Git</a> <a class="post-tag" href="/tags/CSS/">CSS</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
